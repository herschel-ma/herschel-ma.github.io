---
title: "动态导包和已导入的模块"
date: 2021-02-22T22:02:02+08:00
description: "如何知道自己当前模块引入了多少包呢？怎么动态加载包呢？"
draft: false
hideToc: false
enableToc: true
enableTocContent: true
author: Herschel
authorEmoji: 🦊
pinned: false
tags:
- python
series:
-
categories:
- python
image:
---
## How to list imported modules
- How to enumerate all imported modules?
- E.g. I would like to get ['os','sys'] from this code:

```python
import sys
import os
```

## Answer liked most
- 所有加载模块都会出现在`sys.moudles`中

```python
import sys
sys.moudles.keys()
```

- An approximation of getting all imports for the current module only would be to inspect `globals()` for modules:

```python
import types

def imports():
    for name, val in globals.items():
        if isinstance(val, types.MoudleType):
            yield val.__name__

imported_moudles = [i for i in imports()]
print(imported_moudles)
```

- This won't return local imports, or non-moudle imports like `from x import y`. Note that this returns `val.__name__` so you get the original module name if you used import moudle as alias; yield name instead if you want the alias.

## dynamically import
- 以下两种方式均可将变量或者包名的字符串传入，动态加载模块。
    1. `exec()`
    2. `__import__()`
