---
title: "é¢å‘å¯¹è±¡"
date: 2021-02-06T15:53:05+08:00
description: "å°è£… å†…å­˜ç©ºé—´ å †ç©ºé—´"
draft: false
hideToc: false
enableToc: true
enableTocContent: true
author: Herschel
authorEmoji: ğŸ…
pinned: false
tags:
- c++
series:
-
categories:
-
image:

---
## å°è£…

æˆå‘˜å˜é‡ç§æœ‰åŒ–ï¼Œæä¾›å…¬å…±çš„getterå’Œsetterç»™å¤–ç•Œå»è®¿é—®æˆå‘˜å˜é‡

## classå’Œstruct

c++ä¸­`class`å’Œ`struct`å°±æ˜¯ç±»ï¼Œå”¯ä¸€çš„åŒºåˆ«çš„æ˜¯ class å®šä¹‰çš„ç±»å¯¹è±¡ï¼Œé»˜è®¤æƒ…å†µä¸‹æˆå‘˜å˜é‡å’Œæ–¹æ³•æ˜¯ç§æœ‰çš„

```c++
#include <iostream>
using namespace std;

struct Person {
    private:
        int m_age;
    public:
        void setAge(int age) {
            if (age <= 0) return;
            m_age = 1
        } else {
            m_age = age
        }

        int getAge() {
            return m_age;
        }
};

int main() {
    Person person;
    // person.m_age = -4 è®¿é—®ä¸åˆ°
    person.setAge(-4);
    getchar(); // ç­‰å¾…ç›´åˆ°è¾“å…¥ä¸€ä¸ªå­—ç¬¦
    return 0;
}
```

## å†…å­˜ç©ºé—´çš„å¸ƒå±€

æ¯ä¸ªåº”ç”¨éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ï¼Œå…¶å†…å­˜ç©ºé—´ä¸€èˆ¬éƒ½æœ‰ä»¥ä¸‹å‡ å¤§åŒºåŸŸ

1. ä»£ç æ®µï¼ˆä»£ç åŒºï¼‰
ç”¨äºå­˜æ”¾ä»£ç 

2. æ•°æ®æ®µï¼ˆå…¨å±€åŒºï¼‰
ç”¨äºå­˜æ”¾å…¨å±€å˜é‡

3. æ ˆç©ºé—´
ç”¨äºå­˜æ”¾å±€éƒ¨å˜é‡ç­‰ï¼Œæ¯è°ƒç”¨ä¸€ä¸ªå‡½æ•°å°±ä¼šç»™å®ƒåˆ†é…ä¸€æ®µè¿ç»­çš„æ ˆç©ºé—´ï¼Œç­‰å‡½æ•°è°ƒç”¨å®Œæˆä¹‹åé‡Šæ”¾æ ˆç©ºé—´
è‡ªåŠ¨åˆ†é…å’Œå›æ”¶

4. å †ç©ºé—´
éœ€è¦ä¸»åŠ¨å»ç”³è¯·å’Œé‡Šæ”¾
åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸ºäº†èƒ½è‡ªç”±æ§åˆ¶å†…å­˜çš„ç”Ÿå‘½å‘¨æœŸã€å¤§å°ï¼Œä¼šç»å¸¸ä½¿ç”¨å †ç©ºé—´çš„å†…å­˜
```c++
#include <iostream>
using namespace std;

void test() {
    int *p = (int*)malloc(4); // ä»å †ç©ºé—´ä¸­è·å–4ä¸ªå­—èŠ‚çš„å†…å­˜ç©ºé—´ï¼Œè¿”å›è¿ç»­ç©ºé—´çš„é¦–å†…å­˜åœ°å€
    *p = 10;
    free(p); // å †ç©ºé—´å¿…é¡»æ‰‹åŠ¨é‡Šæ”¾

    char *t = new char[4]
    delete[] t;
}
int main() {
    test();
    getchar();
    return 0;
}

```
## å †ç©ºé—´çš„åˆå§‹åŒ–

### mallocå’Œnewçš„åŒºåˆ«
`malloc`ä¸ä¼šåˆå§‹åŒ–å¯¹è±¡ï¼Œè€Œ`new`ä¼š
```c++
#include<iostream>
using namespace std;

void test() {
    int *p0 = new int(); // ä¼šåˆå§‹åŒ–
    int *p1 = new int[3]; // ä¸ä¼šåˆå§‹åŒ–
    int *p2 = new int[3](); // ä¼šåˆå§‹åŒ–
    int *p3 = new int[3]{5}; // å°†æ•°ç»„é¦–ä½åˆå§‹åŒ–ä¸º5ï¼Œå…¶ä»–ä»ä¸º0
    cout << *p0 << endl; // è¾“å‡º
}
int main() {
    int *p = (int*)malloc(sizeof(int)*10) // ç”³è¯·40ä¸ªå­—èŠ‚çš„å †ç©ºé—´
    *p = 1; // å°†ç¬¬ä¸€ä¸ªå­—èŠ‚åœ°å€èµ‹å€¼ä¸º1
    // ä»påœ°å€å¼€å§‹çš„è¿ç»­4ä¸ªå­—èŠ‚ä¸­çš„æ¯ä¸€ä¸ªå­—èŠ‚éƒ½è®¾ç½®ä¸º1
    // memset(p, 1, 4)
    // 00000001 00000001 00000001 00000001


    // å°†å››ä¸ªå­—èŠ‚è®¾ç½®ä¸º1
    // 00000000 00000000 00000000 00000000
    test()
    getchar;
    return 0;
}
```
## å¯¹è±¡å†…å­˜

å¯¹è±¡çš„å†…å­˜å¯ä»¥æ”¾åˆ°å…¨å±€åŒºï¼Œå †ç©ºé—´æˆ–è€…æ ˆç©ºé—´
